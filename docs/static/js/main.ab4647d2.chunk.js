(this["webpackJsonpb-spline-demos"]=this["webpackJsonpb-spline-demos"]||[]).push([[0],{121:function(t,e,n){t.exports=n(222)},126:function(t,e,n){},222:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(114),o=n.n(i),c=(n(126),n(77)),s=n(14),u=n(10),h=n(36),l=n(37),f=n(15),d=n.n(f),v=function(t,e){return 0===e?0:t/e},y=function(){function t(e){Object(h.a)(this,t),this.order=3,this.maxT=void 0,this.tArray=void 0,this.factorArray=void 0,this.cPoints=void 0,this.tRange=void 0,this.cPoints=e,this.maxT=e.length+this.order,this.tArray=this.generateTArray(),this.factorArray=[],this.tRange=[this.order-1,e.length]}return Object(l.a)(t,[{key:"generateTArray",value:function(){for(var t=[],e=0;e<=this.maxT;e++)t.push(e);return t}},{key:"getPoints",value:function(){for(var t=this,e=Object(u.a)(this.tRange,2),n=e[0],r=e[1],a=this.cPoints.map((function(e,n){return t.getFactorGenerator(n)})),i=[],o=function(e){var n=a.map((function(t){return t(e)}));i.push(t.cPoints.reduce((function(t,e,r){var a=Object(u.a)(t,2),i=a[0],o=a[1],c=Object(u.a)(e,2),s=c[0],h=c[1];return[i+s*n[r],o+h*n[r]]}),[0,0]))},c=n;c<=r;c+=.1)o(c);return i}},{key:"getFactorGenerator",value:function(t){var e=this.tArray[t],n=this.tArray[t+1],r=this.tArray[t+2],a=this.tArray[t+3];return function(t){return t<e||t>=a?0:t<n?v(t-e,r-e)*v(t-e,n-e):t<r?v(t-e,r-e)*v(r-t,r-n)+v(a-t,a-n)*v(t-n,r-n):t<a?v(a-t,a-n)*v(a-t,a-r):0}}}]),t}(),g=[[50,10],[100,30],[200,60],[300,300],[150,200],[100,150],[50,100]];var p=function(){var t=Object(r.useRef)(null),e=Object(r.useState)(null),n=Object(u.a)(e,2),i=n[0],o=n[1];return Object(r.useEffect)((function(){t.current&&null==i&&o(d.a.init(t.current,{renderer:"canvas"}))}),[t.current]),Object(r.useEffect)((function(){if(i){var t=new y(g).getPoints(),e=new d.a.Polyline({shape:{points:t}});i.add(e),g.forEach((function(t,n){var r=new d.a.Circle({shape:{cx:t[0],cy:t[1],r:3},draggable:!0});r.on("drag",(function(t){g[n]=[t.offsetX,t.offsetY];var r=new y(g).getPoints();e.shape.points=r,e.dirty()})),i.add(r)}))}}),[i]),a.a.createElement("div",{style:{padding:"32px 0"}},a.a.createElement("div",{style:{textAlign:"center",marginBottom:"32px"}},"\u5747\u5300\u4e09\u9636B\u6837\u6761\u66f2\u7ebf"),a.a.createElement("div",{ref:t,style:{width:"100%",height:"400px"}}))},m=function(t,e){return 0===e?0:t/e},b=function(){function t(e,n){Object(h.a)(this,t),this.order=void 0,this.tArray=void 0,this.maxIndex=void 0,this.cache=new Map,this.polynomialArray=[],this.tArray=e,this.order=n,this.maxIndex=e.length-n;for(var r=0;r<n;r+=1)this.polynomialArray.push(new t(this.tArray,r))}return Object(l.a)(t,[{key:"get",value:function(t){if(t>this.maxIndex)return function(){return 0};var e=this.cache.get(t);return e||(1===this.order?this.getFuncByOrderOne(t):this.getFuncByOrderGreaterThanOne(t))}},{key:"getFuncByOrderOne",value:function(t){var e=this,n=function(n){return n>=e.tArray[t]&&n<e.tArray[t+1]?1:0};return this.cache.set(t,n),n}},{key:"getFuncByOrderGreaterThanOne",value:function(t){var e=this.tArray,n=this.order,r=this.polynomialArray[n-1];return function(a){return m(a-e[t],e[t+n-1]-e[t])*r.get(t)(a)+m(e[t+n]-a,e[t+n]-e[t+1])*r.get(t+1)(a)}}}]),t}(),A=function(){function t(e,n){if(Object(h.a)(this,t),this.cPoints=void 0,this.order=void 0,this.tArray=void 0,this.bSplinePolynomial=void 0,n>e.length)throw new Error("the order(".concat(n,") cannot be greater than the length of control point(").concat(e.length,")."));if(n<2)throw new Error("order cannot be less than 2.");this.cPoints=e,this.order=n,this.tArray=this.generateTArray(),this.bSplinePolynomial=new b(this.tArray,n)}return Object(l.a)(t,[{key:"generateTArray",value:function(){for(var t=[],e=this.cPoints.length+this.order,n=0;n<e;n+=1)n<this.order?t.push(0):n<=this.cPoints.length?t.push(n-this.order+1):t.push(this.cPoints.length-this.order+1);return t}},{key:"getPoint",value:function(t){var e=this;return this.cPoints.reduce((function(n,r,a){var i=Object(u.a)(n,2),o=i[0],c=i[1],s=Object(u.a)(r,2),h=s[0],l=s[1],f=e.bSplinePolynomial.get(a)(t);return[o+f*h,c+f*l]}),[0,0])}}]),t}();var O=function(){var t=Object(r.useRef)(null),e=Object(r.useState)(null),n=Object(u.a)(e,2),i=n[0],o=n[1];return Object(r.useEffect)((function(){t.current&&null==i&&o(d.a.init(t.current,{renderer:"canvas"}))}),[t.current]),Object(r.useEffect)((function(){if(i){for(var t=[[50,50],[100,70],[80,140],[100,200],[160,180],[200,200],[200,300],[300,200],[400,400]],e=new A(t,3),n=[],r=0;r<=e.tArray[e.tArray.length-1];r+=.01){var a=e.getPoint(r);n.push(a)}var o=new d.a.Polyline({shape:{points:n}});i.add(o),t.forEach((function(e,n){var r=new d.a.Circle({shape:{cx:e[0],cy:e[1],r:3},draggable:!0});r.on("drag",(function(e){t[n]=[e.offsetX,e.offsetY];for(var r=new A(t,3),a=[],i=0;i<=r.tArray[r.tArray.length-1];i+=.01){var c=r.getPoint(i);a.push(c)}o.shape.points=a,o.dirty()})),i.add(r)}))}}),[i]),a.a.createElement("div",{style:{padding:"32px 0"}},a.a.createElement("div",{style:{textAlign:"center",marginBottom:"32px"}},"\u5f00\u653e\u5747\u5300B\u6837\u6761\u66f2\u7ebf"),a.a.createElement("div",{ref:t,style:{width:"100%",height:"400px"}}))},E=(n(175),n(52));var w=function(){var t=Object(s.f)(),e=Object(s.g)();return a.a.createElement("div",{style:{padding:"16px"}},a.a.createElement("h1",{style:{textAlign:"center"}},"B\u6837\u6761\u66f2\u7ebf"),a.a.createElement(E.a.Group,{value:e.pathname,onChange:function(e){t.push(e.target.value)}},a.a.createElement(E.a.Button,{value:"/uniform-b-spline-of-order-3"},"\u5747\u53003\u9636B\u6837\u6761"),a.a.createElement(E.a.Button,{value:"/open-uniform-b-spline"},"\u5f00\u653e\u5747\u5300B\u6837\u6761")))},j=function(){return a.a.createElement(c.a,null,a.a.createElement(w,null),a.a.createElement(s.c,null,a.a.createElement(s.a,{path:"/uniform-b-spline-of-order-3",component:p}),a.a.createElement(s.a,{path:"/open-uniform-b-spline",component:O})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[121,1,2]]]);
//# sourceMappingURL=main.ab4647d2.chunk.js.map