(this["webpackJsonpb-spline-demos"]=this["webpackJsonpb-spline-demos"]||[]).push([[0],{129:function(t,e,r){"use strict";r.r(e);var n=r(0),i=r.n(n),a=r(67),o=r.n(a),c=(r(75),r(31)),s=r(11),h=r(9),u=r(22),l=r(23),f=r(12),d=r.n(f),y=function(t,e){return 0===e?0:t/e},v=function(){function t(e){Object(u.a)(this,t),this.order=3,this.maxT=void 0,this.tArray=void 0,this.factorArray=void 0,this.cPoints=void 0,this.tRange=void 0,this.cPoints=e,this.maxT=e.length+this.order,this.tArray=this.generateTArray(),this.factorArray=[],this.tRange=[this.order-1,e.length]}return Object(l.a)(t,[{key:"generateTArray",value:function(){for(var t=[],e=0;e<=this.maxT;e++)t.push(e);return t}},{key:"getPoints",value:function(){for(var t=this,e=Object(h.a)(this.tRange,2),r=e[0],n=e[1],i=this.cPoints.map((function(e,r){return t.getFactorGenerator(r)})),a=[],o=function(e){var r=i.map((function(t){return t(e)}));a.push(t.cPoints.reduce((function(t,e,n){var i=Object(h.a)(t,2),a=i[0],o=i[1],c=Object(h.a)(e,2),s=c[0],u=c[1];return[a+s*r[n],o+u*r[n]]}),[0,0]))},c=r;c<=n;c+=.1)o(c);return a}},{key:"getFactorGenerator",value:function(t){var e=this.tArray[t],r=this.tArray[t+1],n=this.tArray[t+2],i=this.tArray[t+3];return function(t){return t<e||t>=i?0:t<r?y(t-e,n-e)*y(t-e,r-e):t<n?y(t-e,n-e)*y(n-t,n-r)+y(i-t,i-r)*y(t-r,n-r):t<i?y(i-t,i-r)*y(i-t,i-n):0}}}]),t}(),g=[[50,10],[100,30],[200,60],[300,300],[150,200],[100,150],[50,100]];var p=function(){var t=Object(n.useRef)(null),e=Object(n.useState)(null),r=Object(h.a)(e,2),a=r[0],o=r[1];return Object(n.useEffect)((function(){t.current&&null==a&&o(d.a.init(t.current,{renderer:"canvas"}))}),[t.current]),Object(n.useEffect)((function(){if(a){var t=new v(g).getPoints(),e=new d.a.Polyline({shape:{points:t}});a.add(e),g.forEach((function(t,r){var n=new d.a.Circle({shape:{cx:t[0],cy:t[1],r:3},draggable:!0});n.on("drag",(function(t){g[r]=[t.offsetX,t.offsetY];var n=new v(g).getPoints();e.shape.points=n,e.dirty()})),a.add(n)}))}}),[a]),i.a.createElement("div",{style:{padding:"32px 0"}},i.a.createElement("div",{style:{textAlign:"center",marginBottom:"32px"}},"\u5747\u5300\u4e09\u9636B\u6837\u6761\u66f2\u7ebf"),i.a.createElement("div",{ref:t,style:{width:"100%",height:"400px"}}))},m=function(t,e){return 0===e?0:t/e},b=function(){function t(e,r){Object(u.a)(this,t),this.order=void 0,this.tArray=void 0,this.maxIndex=void 0,this.cache=new Map,this.polynomialArray=[],this.tArray=e,this.order=r,this.maxIndex=e.length-r;for(var n=0;n<r;n+=1)this.polynomialArray.push(new t(this.tArray,n))}return Object(l.a)(t,[{key:"get",value:function(t){if(t>this.maxIndex)return function(){return 0};var e=this.cache.get(t);return e||(1===this.order?this.getFuncByOrderOne(t):this.getFuncByOrderGreaterThanOne(t))}},{key:"getFuncByOrderOne",value:function(t){var e=this,r=function(r){return r>=e.tArray[t]&&r<e.tArray[t+1]?1:0};return this.cache.set(t,r),r}},{key:"getFuncByOrderGreaterThanOne",value:function(t){var e=this.tArray,r=this.order,n=this.polynomialArray[r-1];return function(i){return m(i-e[t],e[t+r-1]-e[t])*n.get(t)(i)+m(e[t+r]-i,e[t+r]-e[t+1])*n.get(t+1)(i)}}}]),t}(),A=function(){function t(e,r){if(Object(u.a)(this,t),this.cPoints=void 0,this.order=void 0,this.tArray=void 0,this.bSplinePolynomial=void 0,r>e.length)throw new Error("the order(".concat(r,") cannot be greater than the length of control point(").concat(e.length,")."));if(r<2)throw new Error("order cannot be less than 2.");this.cPoints=e,this.order=r,this.tArray=this.generateTArray(),this.bSplinePolynomial=new b(this.tArray,r)}return Object(l.a)(t,[{key:"generateTArray",value:function(){for(var t=[],e=this.cPoints.length+this.order,r=0;r<e;r+=1)r<this.order?t.push(0):r<=this.cPoints.length?t.push(r-this.order+1):t.push(this.cPoints.length-this.order+1);return t}},{key:"getPoint",value:function(t){var e=this;return this.cPoints.reduce((function(r,n,i){var a=Object(h.a)(r,2),o=a[0],c=a[1],s=Object(h.a)(n,2),u=s[0],l=s[1],f=e.bSplinePolynomial.get(i)(t);return[o+f*u,c+f*l]}),[0,0])}}]),t}();var O=function(){var t=Object(n.useRef)(null),e=Object(n.useState)(null),r=Object(h.a)(e,2),a=r[0],o=r[1];return Object(n.useEffect)((function(){t.current&&null==a&&o(d.a.init(t.current,{renderer:"canvas"}))}),[t.current]),Object(n.useEffect)((function(){if(a){for(var t=[[50,50],[100,70],[80,140],[100,200],[160,180],[200,200],[200,300],[300,200],[400,400]],e=new A(t,3),r=[],n=0;n<=e.tArray[e.tArray.length-1];n+=.01){var i=e.getPoint(n);r.push(i)}var o=new d.a.Polyline({shape:{points:r}});a.add(o),t.forEach((function(e,r){var n=new d.a.Circle({shape:{cx:e[0],cy:e[1],r:3},draggable:!0});n.on("drag",(function(e){t[r]=[e.offsetX,e.offsetY];for(var n=new A(t,3),i=[],a=0;a<=n.tArray[n.tArray.length-1];a+=.01){var c=n.getPoint(a);i.push(c)}o.shape.points=i,o.dirty()})),a.add(n)}))}}),[a]),i.a.createElement("div",{style:{padding:"32px 0"}},i.a.createElement("div",{style:{textAlign:"center",marginBottom:"32px"}},"\u5f00\u653e\u5747\u5300B\u6837\u6761\u66f2\u7ebf"),i.a.createElement("div",{ref:t,style:{width:"100%",height:"400px"}}))},w=function(){return i.a.createElement(c.a,null,i.a.createElement("div",null,i.a.createElement(c.b,{to:"/uniform-b-spline-of-order-3"},"\u5747\u53003\u9636B\u6837\u6761\u66f2\u7ebf"),i.a.createElement(c.b,{to:"/open-uniform-b-spline"},"\u5f00\u653e\u5747\u5300B\u6837\u6761\u66f2\u7ebf")),i.a.createElement(s.c,null,i.a.createElement(s.a,{path:"/uniform-b-spline-of-order-3",component:p}),i.a.createElement(s.a,{path:"/open-uniform-b-spline",component:O})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},70:function(t,e,r){t.exports=r(129)},75:function(t,e,r){}},[[70,1,2]]]);
//# sourceMappingURL=main.3105d965.chunk.js.map